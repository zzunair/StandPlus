{% comment %}
	GEMPAGE BUILDER (https://apps.shopify.com/gempage)

	You SHOULD NOT modify source code in this page because
	It is automatically generated from GEMPAGE BUILDER
	Try to edit page with the live editor.
{% endcomment %}
<!doctype html>
<!--[if IE 9]> <html class="ie9 no-js supports-no-cookies" lang="{{ shop.locale }}"{% if settings.layout_enable_rtl %} dir="rtl"{% endif %}> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js supports-no-cookies" lang="{{ shop.locale }}"{% if settings.layout_enable_rtl %} dir="rtl"{% endif %}> <!--<![endif]-->
<head>
  {% if product.metafields.furnace.parent_product %}
    {% assign child = canonical_url | split: "/" | last %}
    {% assign canonical_parent = canonical_url | replace: child, product.metafields.furnace.parent_product %}
    {% assign variant = product.first_available_variant.id %}
    {% comment %} 
      parent: {{ canonical_parent }}<br>
      child: {{ child }}<br> 
      variant: {{ variant }}<br>
    {% endcomment %}
    <link rel="canonical" href="{{ canonical_parent }}" />
    <script>
      {% comment %} console.log("{{ canonical_parent | split: "/" | json }}") {% endcomment %}
      const urlArray = {{ canonical_parent | split: "/" | json }};
      const root = urlArray[0]+"//"+urlArray[2];
      const domain = "{{ canonical_parent }}".replace(root, window.location.origin)+"?variant=" + "{{ variant }}";
      console.log("domain:", domain);
      console.log("search:", window.location.search);
      window.location.replace(domain + window.location.search);
    </script>
    <noscript>
      <meta http-equiv="refresh" content="0;url={{ canonical_parent }}">
    </noscript>
  {% else %}
    <link rel="canonical" href="{{ canonical_url }}" />
  {% endif %}
  <script>
    window.dataLayer = window.dataLayer || [];
  </script>    
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-T244WZG');</script>
  <!-- End Google Tag Manager -->

  {% capture get_content_for_header %}{{ content_for_header }}{% endcapture %}
  {% include 'head' %}
  {% render 'judgeme_core' %}
  {% render 'product-datalayer.liquid' %} 
<!--Gem_Page_Header_Script-->
{% render 'gem-app-header-scripts' %}
<!--End_Gem_Page_Header_Script-->
</head>
<body>
<div class="gem-container">
	{{ content_for_layout }}
</div><!-- end .gem-container -->
<!--Gem_Page_Footer_Script-->
  {%- liquid
    assign gpTemplateSuffix = template.suffix
    assign arrSplitSuffix = gpTemplateSuffix | split: '-'
    if gpTemplateSuffix contains 'gem-' and gpTemplateSuffix contains '-template' and arrSplitSuffix.size == 3
      assign isV6GpTemplate = true
    endif
    assign gpShopMeta = shop.metafields.gempages
    if gpShopMeta
      if gpShopMeta['productV6-default'] == 'true' and request.page_type == 'product'
        assign isProductDefault = true
      endif
      if gpShopMeta['collectionV6-default'] == 'true' and request.page_type == 'collection'
        assign isCollectionDefault = true
      endif
      if gpShopMeta['indexV6-default'] == 'true' and request.page_type == 'index'
        assign isIndexDefault = true
      endif
      if isProductDefault or isCollectionDefault or isIndexDefault or isPreviewV6
        assign isV6GpTemplate = true
      endif
    endif
  %}
  {% if isV6GpTemplate %}
    {% render 'gem-app-footer-scripts', GEM_FOOTER_SCRIPT: GEM_FOOTER_SCRIPT %}
  {% endif %}
<!--End_Gem_Page_Footer_Script-->






































































































</body>
</html>