/*!
 * jquery.instagramFeed
 *
 * @version 1.2.0
 *
 * @author Javier Sanahuja Liebana <bannss1@gmail.com>
 * @contributor csanahuja <csanahuja@gmail.com>
 *
 * https://github.com/jsanahuja/jquery.instagramFeed
 *
 */
window.jQuery.fn.is_theme_jquery||(window.jQueryBackup=window.jQuery,window.jQuery=window.jQueryTheme),jQueryTheme,function(e){function a(e){return e.replace(/[&<>"'`=\/]/g,(function(e){return d[e]}))}function i(e){return void 0!==e.node.edge_media_to_caption.edges[0]&&void 0!==e.node.edge_media_to_caption.edges[0].node&&void 0!==e.node.edge_media_to_caption.edges[0].node.text&&null!==e.node.edge_media_to_caption.edges[0].node.text?e.node.edge_media_to_caption.edges[0].node.text:void 0!==e.node.title&&null!==e.node.title&&0!=e.node.title.length?e.node.title:!(void 0===e.node.accessibility_caption||null===e.node.accessibility_caption||0==e.node.accessibility_caption.length)&&e.node.accessibility_caption}function t(e,a){var i=a||!1;if(!a&&0<e.cache_time){var t=localStorage.getItem(e.cache_time_key);null!==t&&parseInt(t)+6e4*e.cache_time>(new Date).getTime()&&(i=!0)}if(i){var r=localStorage.getItem(e.cache_data_key);if(null!==r)return JSON.parse(r)}return!1}function r(a,i,t,o,n,s){var l;n&&s&&(l="https://images"+~~(3333*Math.random())+"-focus-opensocial.googleusercontent.com/gadgets/proxy?container=none&url="+a),e.get(l||a,(function(e){var a=function(e,a){switch(e){case"username":case"tag":case"location":try{a=a.split("window._sharedData = ")[1].split("<\/script>")[0]}catch(e){return!1}return void 0!==(a=(a=JSON.parse(a.substr(0,a.length-1))).entry_data.ProfilePage||a.entry_data.TagPage||a.entry_data.LocationsPage)&&(a[0].graphql.user||a[0].graphql.hashtag||a[0].graphql.location);case"userid":return void 0!==a.data.user&&a.data.user}}(i,e);o(!1!==a&&a)})).fail((function(e){1<t?(console.warn("Instagram Feed: Request failed, "+(t-1)+" tries left. Retrying..."),r(a,i,t-1,o,n,!s)):o(!1,e)}))}function o(e,a){var i=t(e,!1);if(!1!==i)a(i);else{var o;switch(e.type){case"username":o=e.host+e.id+"/";break;case"tag":o=e.host+"explore/tags/"+e.id+"/";break;case"location":o=e.host+"explore/locations/"+e.id+"/";break;case"userid":o=e.host+'graphql/query/?query_id=17888483320059182&variables={"id":"'+e.id+'","first":'+e.items+',"after":null}'}r(o,e.type,e.max_tries,(function(i,r){!1===i?void 0===r?e.on_error("Instagram Feed: It looks like the profile you are trying to fetch is age restricted. See https://github.com/jsanahuja/InstagramFeed/issues/26",3):!1===(i=t(e,!0))?e.on_error("Instagram Feed: Unable to fetch the given user/tag. Instagram responded with the status code: "+r.status,5):a(i):(function(e,a){var i=localStorage.getItem(e.cache_time_key);0!=e.cache_time&&(null===i||parseInt(i)+6e4*e.cache_time>(new Date).getTime())&&(localStorage.setItem(e.cache_data_key,JSON.stringify(a)),localStorage.setItem(e.cache_time_key,(new Date).getTime()))}(e,i),a(i))}),e.host===s.host&&"userid"!=e.type,!1)}}function n(t,r){var o,n="";if(t.styling?(o={profile_container:' style="text-align:center;"',profile_image:' style="border-radius:10em;width:15%;max-width:125px;min-width:50px;"',profile_name:' style="font-size:1.2em;"',profile_biography:' style="font-size:1em;"',gallery_image:' style="width:100%;"',gallery_image_link:' style="width:'+(100-2*t.margin*t.items_per_row)/t.items_per_row+"%; margin:"+t.margin+'%;position:relative; display: inline-block; height: 100%;"'},t.display_captions&&(n+="<style>                    a[data-caption]:hover::after {                        content: attr(data-caption);                        text-align: center;                        font-size: 0.8rem;                        color: black;                        position: absolute;                        left: 0;                        right: 0;                        bottom: 0;                        padding: 1%;                        max-height: 100%;                        overflow-y: auto;                        overflow-x: hidden;                        background-color: hsla(0, 100%, 100%, 0.8);                    }                </style>")):o={profile_container:"",profile_image:"",profile_name:"",profile_biography:"",gallery_image:"",gallery_image_link:""},t.display_profile&&"userid"!==t.type&&(n+='<div class="instagram_profile"'+o.profile_container+">",n+='<img class="instagram_profile_image" src="'+r.profile_pic_url+'" alt="'+("tag"==t.type?r.name+" tag pic":r.username+" profile pic")+'"'+o.profile_image+(t.lazy_load?' loading="lazy"':"")+" />","tag"==t.type?n+='<p class="instagram_tag"'+o.profile_name+'><a href="https://www.instagram.com/explore/tags/'+t.tag+'/" rel="noopener" target="_blank">#'+t.tag+"</a></p>":"username"==t.type?(n+="<p class='instagram_username'"+o.profile_name+">@"+r.full_name+" (<a href='https://www.instagram.com/"+t.username+"/' rel='noopener' target='_blank'>@"+t.username+"</a>)</p>",t.display_biography&&(n+="<p class='instagram_biography'"+o.profile_biography+">"+r.biography+"</p>")):"location"==t.type&&(n+="<p class='instagram_location'"+o.profile_name+"><a href='https://www.instagram.com/explore/locations/"+t.location+"/' rel='noopener' target='_blank'>"+r.name+"</a></p>"),n+="</div>"),t.display_gallery)if(void 0!==r.is_private&&!0===r.is_private)n+='<p class="instagram_private"><strong>This profile is private</strong></p>';else{var s=void 0===l[t.image_size]?l[640]:l[t.image_size],d=(r.edge_owner_to_timeline_media||r.edge_hashtag_to_media||r.edge_location_to_media).edges,c=d.length>t.items?t.items:d.length;n+="<div class='instagram_gallery'>";for(var g=0;g<c;g++){var _,p,m="https://www.instagram.com/p/"+d[g].node.shortcode;switch(!1===(y=i(d[g]))&&(y=("userid"==t.type?"":t.id)+" image"),y=a(y),d[g].node.__typename){case"GraphSidecar":p="sidecar",_=d[g].node.thumbnail_resources[s].src;break;case"GraphVideo":p="video",_=d[g].node.thumbnail_src;break;default:p="image",_=d[g].node.thumbnail_resources[s].src}n+='<a href="'+m+'"'+(t.display_captions?' data-caption="'+y+'"':"")+' class="instagram-'+p+'" rel="noopener" target="_blank"'+o.gallery_image_link+">",n+="<img"+(t.lazy_load?' loading="lazy"':"")+' src="'+_+'" alt="'+y+'"'+o.gallery_image+" />",n+="</a>"}n+="</div>"}if(t.display_igtv&&void 0!==r.edge_felix_video_timeline){var u=r.edge_felix_video_timeline.edges;if(c=u.length>t.items?t.items:u.length,0<u.length){for(n+='<div class="instagram_igtv">',g=0;g<c;g++){var y;m="https://www.instagram.com/p/"+u[g].node.shortcode,!1===(y=i(u[g]))&&(y=("userid"==t.type?"":t.id)+" image"),y=a(y),n+='<a href="'+m+'"'+(t.display_captions?' data-caption="'+y+'"':"")+' rel="noopener" target="_blank"'+o.gallery_image_link+">",n+="<img"+(t.lazy_load?' loading="lazy"':"")+' src="'+u[g].node.thumbnail_src+'" alt="'+y+'"'+o.gallery_image+" />",n+="</a>"}n+="</div>"}}e(t.container).html(n)}var s={host:"https://www.instagram.com/",username:"",tag:"",user_id:"",location:"",container:"",display_profile:!0,display_biography:!0,display_gallery:!0,display_captions:!1,display_igtv:!1,max_tries:8,callback:null,styling:!0,items:8,items_per_row:4,margin:.5,image_size:640,lazy_load:!1,cache_time:360,on_error:console.error},l={150:0,240:1,320:2,480:3,640:4},d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};e.instagramFeed=function(a){var i=e.fn.extend({},s,a);return""==i.username&&""==i.tag&&""==i.user_id&&""==i.location?(i.on_error("Instagram Feed: Error, no username, tag or user_id defined.",1),!1):(void 0!==a.display_profile&&a.display_profile&&""!=i.user_id&&console.warn("Instagram Feed: 'display_profile' is not available using 'user_id' (GraphQL API)"),void 0!==a.display_biography&&a.display_biography&&(""!=i.tag||""!=i.location||""!=i.user_id)&&console.warn("Instagram Feed: 'display_biography' is not available unless you are loading an user ('username' parameter)"),void 0!==i.get_data&&console.warn("Instagram Feed: options.get_data is deprecated, options.callback is always called if defined"),null==i.callback&&""==i.container?(i.on_error("Instagram Feed: Error, neither container found nor callback defined.",2),!1):(""==i.username?""==i.tag?""==i.location?(i.type="userid",i.id=i.user_id):(i.type="location",i.id=i.location):(i.type="tag",i.id=i.tag):(i.type="username",i.id=i.username),i.cache_data_key="instagramFeed_"+i.type+"_"+i.id,i.cache_time_key=i.cache_data_key+"_time",o(i,(function(e){""!=i.container&&n(i,e),null!=i.callback&&i.callback(e)})),!0))}}(jQuery),window.jQueryBackup&&(window.jQuery=window.jQueryBackup,window.jQueryBackup=void 0);