function openModalEr(e,t){var o=document.getElementById(e);o.classList.remove("hidden"),o.querySelector(".popup__overlay").classList.remove("hidden"),o.querySelector(".popup__overlay").addEventListener("click",()=>closeModalEr(e)),document.body.style.overflowY="hidden",renderPage(t)}function closeModalEr(e){e=document.getElementById(e);e.classList.add("hidden"),e.querySelector(".popup__overlay").classList.add("hidden"),document.body.style.overflowY="auto",document.getElementById("contentAtcModal").innerHTML="",document.querySelector(".lds-ring").classList.remove("hidden")}function renderPage(e){let t;var o=new URL("https://www.weargales.com/"+e);renderSectionFromFetch(t=""===o.search?`https://www.weargales.com/${e}?view=er-atc-modal`:`https://www.weargales.com/${e}&view=er-atc-modal`,e)}async function renderSectionFromFetch(e,t){var o=document.getElementById("contentAtcModal"),e=await(await fetch(e)).text(),e=(new DOMParser).parseFromString(e,"text/html").getElementById("productPageContainer").innerHTML,n=document.createElement("div");n.innerHTML=e,document.querySelector(".lds-ring").classList.add("hidden"),o.appendChild(n),o.querySelector(".product-page-info").insertAdjacentHTML("beforebegin",`<a class="more-info" href="https://www.weargales.com${t}">More info</a>`),loadEvents(t)}function loadEvents(e){document.querySelector('.product-page-info__button-add-to-cart button[type="submit"]').addEventListener("click",()=>{setTimeout(()=>{closeModalEr("atcModal")},1e3)});var t=document.createElement("script"),t=(t.innerHTML="theme.AssetsLoader.require('scripts', 'product_page');",document.getElementById("contentAtcModal").appendChild(t),theme.LazyImage.update(),new URL("https://www.weargales.com/"+e)),o=t.searchParams.get("color").replaceAll("-","");if(o){const n=document.getElementById("contentAtcModal").querySelector(`.product-options__value[data-value="${o}"]`);n&&(n.click(),setTimeout(()=>{n.click()},400))}o=t.searchParams.get("fit");if(o){let e=null;"m"===o&&(e=document.getElementById("contentAtcModal").querySelector('.product-options__value[data-code="unisex-M"]')),(e="w"===o?document.getElementById("contentAtcModal").querySelector('.product-options__value[data-code="unisex-W"]'):e)&&setTimeout(()=>{e.click()},400)}document.getElementById("contentAtcModal").querySelector(".more-info").href="https://www.weargales.com"+e}