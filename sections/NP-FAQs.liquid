<link rel="stylesheet" href="{{ 'NP-Faqs.css' | asset_url }}">

<div class="faq-container container">
  <h1 class="faq-heading">{{ section.settings.heading }}</h1>
  
  <div class="faq-list">
    {% for block in section.blocks %}
      <div class="faq-item" {{ block.shopify_attributes }}>
        <div class="faq-question">
          <h3>{{ block.settings.question }}</h3>
          <span class="faq-toggle">+</span>
        </div>
        <div class="faq-answer">
          <div class="faq-answer-content">
            {{ block.settings.answer }}
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const faqItems = document.querySelectorAll('.faq-item');
    
    faqItems.forEach(item => {
      const question = item.querySelector('.faq-question');
      const toggle = item.querySelector('.faq-toggle');
      
      question.addEventListener('click', function() {
        const answer = item.querySelector('.faq-answer');
        const isOpen = answer.classList.contains('active');
        
        // Close all other answers
        document.querySelectorAll('.faq-answer.active').forEach(openAnswer => {
          if (openAnswer !== answer) {
            openAnswer.classList.remove('active');
            openAnswer.previousElementSibling.querySelector('.faq-toggle').textContent = '+';
          }
        });
        
        // Toggle current answer
        if (isOpen) {
          answer.classList.remove('active');
          toggle.textContent = '+';
        } else {
          answer.classList.add('active');
          toggle.textContent = '-';
        }
      });
    });
  });
</script>

{% schema %}
{
  "name": "NP FAQs",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "FREQUENTLY ASKED QUESTIONS"
    }
  ],
  "blocks": [
    {
      "type": "faq",
      "name": "FAQ Item",
      "settings": [
        {
          "type": "text",
          "id": "question",
          "label": "Question",
          "default": "What's your question?"
        },
        {
          "type": "richtext",
          "id": "answer",
          "label": "Answer",
          "default": "<p>Provide your answer here.</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "NP FAQs"
    }
  ]
}
{% endschema %}